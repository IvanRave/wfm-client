<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: viewmodels/perfomance-of-well.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: viewmodels/perfomance-of-well.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>ï»¿/** @module */
define(['jquery',
		'knockout',
		'd3',
		'helpers/modal-helper',
		'moment',
		'models/column-attribute'
	], function ($, ko, d3, modalHelper, appMoment, ColumnAttribute) {
	'use strict';

	function fromOAtoJS(oaDate) {
		var jsDate = new Date((parseFloat(oaDate) - 25569) * 24 * 3600 * 1000);
		return new Date(jsDate.getUTCFullYear(), jsDate.getUTCMonth(), jsDate.getUTCDate(), jsDate.getUTCHours(), jsDate.getUTCMinutes(), jsDate.getUTCSeconds());
	}

	function buildMatchTable(response, fileExtension, columnAttrList, callbackToSend) {
		console.log('column attributes without calc: ', columnAttrList);
		var bodyDom = document.createElement('div');
		$(bodyDom).css({
			'overflow' : 'auto'
		});
		var fragmentTable = document.createElement('tbody');
		var fragmentTableFoot = document.createElement('tfoot');
		var fragmentTableWrap = document.createElement('table');
		$(fragmentTableWrap).addClass('table-fragment').append(fragmentTableFoot, fragmentTable);
		////addClass('standart-table');
		bodyDom.appendChild(fragmentTableWrap);

		// last column index - to place matching select box for every column
		var maxColumnIndex = 0;

		var isFileExtensionTxt = fileExtension === '.txt';

		for (var i = 0, ilimit = response.length; i &lt; ilimit; i++) {
			var fragmentTR = document.createElement('tr');
			var jlimit = response[i].length;

			maxColumnIndex = Math.max(maxColumnIndex, jlimit);

			// add first column as a data begin index selector
			for (var j = 0; j &lt; jlimit; j++) {
				var fragmentTD = document.createElement('td');
				var cellText = response[i][j];
				// if not empty then add (0 value - stay in table)
				if (cellText !== null && cellText !== '') {
					if (j === 0 && isFileExtensionTxt === false) {
						// if date column (by agreement - it is first column)
						// try to convert to YYYY-MM-DD
						if (parseInt(cellText, 10) % 1 === 0) {
							// it is integer
							cellText = appMoment(fromOAtoJS(parseInt(cellText, 10))).format('YYYY-MM-DD');
						}
					}

					fragmentTD.appendChild(document.createTextNode(cellText));
				}

				fragmentTR.appendChild(fragmentTD);
			}

			fragmentTable.appendChild(fragmentTR);
		}

		// add ProdDays to columnAttr
		var prodDaysObj = {
			Name : 'ProdDays',
			NumeratorList : ['days']
		};

		columnAttrList.push(prodDaysObj);

		// add Date to columnAttr
		var dateObj = {
			Name : 'Date',
			NumeratorList : ['auto']
		};

		if (isFileExtensionTxt === true) {
			dateObj.NumeratorList = ['d-MMM-yy', 'dd-MMM-yy', 'yyyy-MM-dd', 'M/d/yyyy', 'dd-MM-yyyy', 'MM-dd-yyyy'];
		}

		columnAttrList.push(dateObj);

		// string with column names
		var sourceSelect = '&lt;option>&lt;/option>';

		for (var clm = 0; clm &lt; columnAttrList.length; clm++) {
			sourceSelect += '&lt;option val="' + columnAttrList[clm].Name + '">' + columnAttrList[clm].Name + '&lt;/option>';
		}

		// 1. set names
		// 2. after select - view volume + time + other
		// 3. after OK - get all names + get all formats + get column index
		// 4. and send to the server
		// string with column formats

		// matching column names
		var matchNameTR = document.createElement('tr');
		fragmentTableFoot.appendChild(matchNameTR);
		// matching column formats
		var matchFormatTR = document.createElement('tr');
		fragmentTableFoot.appendChild(matchFormatTR);

		// collection of select inputs
		var matchSelectList = [];
		// create all inputs and put in collection
		for (var z = 0; z &lt; maxColumnIndex; z++) {
			var matchNameTD = document.createElement('td');
			////$(matchNameTD).addClass('wo-border');
			// select input for column match names
			var matchNameSelect = document.createElement('select');
			$(matchNameSelect).addClass('input-sm').html(sourceSelect);
			matchNameTD.appendChild(matchNameSelect);
			matchNameTR.appendChild(matchNameTD);

			// match formats (numerator)
			var matchFormatTD = document.createElement('td');
			// select input for column match names
			var matchFormatSelect = document.createElement('select');
			$(matchFormatSelect).addClass('input-sm').hide();
			matchFormatTD.appendChild(matchFormatSelect);
			matchFormatTR.appendChild(matchFormatTD);

			// match formats (denominator)
			var matchFormatSelectDenominator = document.createElement('select');
			$(matchFormatSelectDenominator).addClass('input-sm').hide();
			matchFormatTD.appendChild(matchFormatSelectDenominator);

			// add both select inputs to main collection
			matchSelectList.push({
				matchNameElem : matchNameSelect,
				matchFormatElem : matchFormatSelect,
				matchFormatElemDenominator : matchFormatSelectDenominator
			});
		}

		function fillSelectBoxes(event) {
			var choosedColumnName = $(event.currentTarget).val();

			if (!choosedColumnName) {
				// empty and hide format selectboxes
				$(matchSelectList[event.data.elemColumnIndex].matchFormatElem).html('').hide();
				$(matchSelectList[event.data.elemColumnIndex].matchFormatElemDenominator).html('').hide();
				return;
			}

			// select options to upper part (numerator)
			// get Format list of need element (first element)
			var columnAttrElement = $.grep(columnAttrList, function (arrElem) {
					// The filter function must return 'true' to include the item in the result array.
					return (arrElem.Name === choosedColumnName);
				})[0];

			var numeratorOptionList = '';
			// make select box from format list
			$.each(columnAttrElement.NumeratorList, function (frmIndex, frmElem) {
				numeratorOptionList += '&lt;option value="' + frmElem + '">' + frmElem + '&lt;/option>';
			});

			$(matchSelectList[event.data.elemColumnIndex].matchFormatElem).html(numeratorOptionList).show();

			if (columnAttrElement.DenominatorList) {
				var denominatorOptionList = '';
				// make select box from format list
				$.each(columnAttrElement.DenominatorList, function (frmIndex, frmElem) {
					denominatorOptionList += '&lt;option value="' + frmElem + '">' + frmElem + '&lt;/option>';
				});

				$(matchSelectList[event.data.elemColumnIndex].matchFormatElemDenominator).html(denominatorOptionList).show();
			} else {
				$(matchSelectList[event.data.elemColumnIndex].matchFormatElemDenominator).html('').hide();
			}
		}

		// Generate select-boxes with unit format from select-box with unit name
		for (var k = 0; k &lt; matchSelectList.length; k += 1) {
			$(matchSelectList[k].matchNameElem).on('change', {
				elemColumnIndex : k
			}, fillSelectBoxes);
		}

		// clickable rows
		$(fragmentTable).find('tr').on('click', function () {
			$(this).siblings().removeClass('selected-row');
			$(this).addClass('selected-row');
		});

		// show all rows in modal window (or new tab)
		// show with header select (column name match, column format (divided to volume/time))
		var submitFunction = function () {
			// calculate beginRowIndex
			var $selectedRowList = $(fragmentTable).find('tr.selected-row');

			if ($selectedRowList.length === 0) {
				alert('Please select a row, where data begins');
				return;
			}
			// end calculate

			var needColumnListSelected = $.map(matchSelectList, function (arrElem, arrIndex) {
					if ($(arrElem.matchNameElem).val()) {
						var pdColumnAttr = new ColumnAttribute({
								Id : arrIndex,
								Name : $(arrElem.matchNameElem).val(),
								Format : $(arrElem.matchFormatElem).val() + ($(arrElem.matchFormatElemDenominator).val() ? ("/" + $(arrElem.matchFormatElemDenominator).val()) : '')
							});

						return pdColumnAttr.toPlainJson();
					}
				});

			// get all previous siblings before selected row
			var tmpCountOfRows = $selectedRowList.prevAll().length;

			callbackToSend(needColumnListSelected, tmpCountOfRows);
			modalHelper.closeModalWideWindow();
		};

		modalHelper.openModalWideWindow(bodyDom, submitFunction, 'Please select values for columns');
	}

	/**
	 * Perfomance of well viewmodel (one well - one perfomance)
	 * @constructor
	 */
	var exports = function (optns, mdlPerfomanceOfWell, vwmWell) {
		var vw = this;

		vw.mdlPerfomanceOfWell = mdlPerfomanceOfWell;

		vw.isVisibleForecastData = ko.observable(optns.isVisibleForecastData);

		vw.selectedPrfTableYear = ko.observable();
		vw.selectPrfTableYear = function (selectedPrfTableYearItem) {
			vw.selectedPrfTableYear(selectedPrfTableYearItem);
		};

		vw.monthList = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];

		vw.WPDDateStartYear = ko.observable(optns.startYear);
		vw.WPDDateEndYear = ko.observable(optns.endYear);
		vw.WPDDateStartMonth = ko.observable(optns.startMonth);
		vw.WPDDateEndMonth = ko.observable(optns.endMonth);

		function updateSelectedPrfTableYear() {
			var tmpWpdDateStartYear = ko.unwrap(vw.WPDDateStartYear),
			tmpWpdDateEndYear = ko.unwrap(vw.WPDDateEndYear),
			tmpSelectedPrfTableYear = ko.unwrap(vw.selectedPrfTableYear);

			if (tmpWpdDateStartYear && tmpWpdDateEndYear) {
				if (!tmpSelectedPrfTableYear || tmpSelectedPrfTableYear &lt; tmpWpdDateStartYear || tmpSelectedPrfTableYear > tmpWpdDateEndYear) {
					vw.selectedPrfTableYear(tmpWpdDateStartYear);
				}
			}
		}

		vw.WPDDateStartYear.subscribe(updateSelectedPrfTableYear);
		vw.WPDDateEndYear.subscribe(updateSelectedPrfTableYear);

		// Id of group (squad) of wfm parameters
		// Can be set through options (optns) or using any html view
		vw.selectedAttrGroupId = ko.observable(optns.selectedAttrGroupId);

		vw.selectedAttrGroup = ko.computed({
				read : function () {
					var tmpWfmParamSquadList = ko.unwrap(mdlPerfomanceOfWell.getWellObj().getRootMdl().wfmParamSquadList);

					var tmpAttrGroup = $.grep(tmpWfmParamSquadList, function (elemValue) {
							return elemValue.id === ko.unwrap(vw.selectedAttrGroupId);
						});

					if (tmpAttrGroup.length > 0) {
						return tmpAttrGroup[0];
					}
				},
				deferEvaluation : true
			});

		/**
		 * Select id of attribute group
		 */
		this.selectAttrGroupId = function (attrGroupId) {
			vw.selectedAttrGroupId(attrGroupId);
		};

		/**
		 * List of selected viewmodels of parameters
		 * @type {Array.&lt;module:viewmodels/wfm-parameter-of-wroup>}
		 */
		this.listOfSlcVwmWfmParameterOfWroup = ko.computed({
				read : function () {
					var resultArr = [];

					var tmpSelectedAttrGroup = ko.unwrap(vw.selectedAttrGroup);

					if (tmpSelectedAttrGroup) {
						var tmpListGlobal = ko.unwrap(vwmWell.getParentVwm().listOfVwmWfmParameterOfWroup);

						// list of parameter for selected squad
						var tmpSelectedWfmParameterList = ko.unwrap(tmpSelectedAttrGroup.wfmParameterList);

						// Select only parameter ids
						var tmpIdList = tmpSelectedWfmParameterList.map(function (ssgElem) {
								return ssgElem.id;
							});

						// return only well group wfm parameters in selected squad
						resultArr = tmpListGlobal.filter(function (wgpElem) {
								return $.inArray(wgpElem.mdlWfmParameterOfWroup.wfmParameterId, tmpIdList) >= 0;
							});
					}

					return resultArr;
				},
				deferEvaluation : true
			});

		/**
		 * Production data, filtered by date
		 */
		this.filteredByDateProductionDataSet = ko.computed({
				read : function () {
					var resultArr = [];

					var tmpHstProductionDataSet = ko.unwrap(mdlPerfomanceOfWell.hstProductionDataSet),
					tmpHistYearList = ko.unwrap(mdlPerfomanceOfWell.histYearList);

					if (tmpHstProductionDataSet.length > 0 && tmpHistYearList.length > 0) {
						// Forecast tmp
						var tmpDcaProductionDataSet = ko.unwrap(mdlPerfomanceOfWell.dcaProductionDataSet),
						tmpIsVisibleForecastData = ko.unwrap(vw.isVisibleForecastData) ? true : false;

						var prdArray;
						if (tmpIsVisibleForecastData) {
							prdArray = tmpDcaProductionDataSet.concat(tmpHstProductionDataSet);
						} else {
							prdArray = tmpHstProductionDataSet;
						}

						// Set bound dates if undefined
						if (!ko.unwrap(vw.WPDDateStartYear)) {
							vw.WPDDateStartYear(tmpHistYearList[0]);
						}

						if (!ko.unwrap(vw.WPDDateEndYear)) {
							vw.WPDDateEndYear(tmpHistYearList[0]);
						}

						if (!ko.unwrap(vw.WPDDateStartMonth)) {
							vw.WPDDateStartMonth(1);
						}

						if (!ko.unwrap(vw.WPDDateEndMonth)) {
							vw.WPDDateEndMonth(12);
						}
						// ----
						// TODO: change WPDDate to right names
						var tmpStartYear = ko.unwrap(vw.WPDDateStartYear),
						tmpEndYear = ko.unwrap(vw.WPDDateEndYear),
						tmpStartMonth = ko.unwrap(vw.WPDDateStartMonth),
						tmpEndMonth = ko.unwrap(vw.WPDDateEndMonth);

						// Seconds from Unix Epoch
						var startUnixTime = new Date(Date.UTC(tmpStartYear, tmpStartMonth - 1, 1)).getTime() / 1000;
						var endUnixTime = new Date(Date.UTC(tmpEndYear, tmpEndMonth - 1, 1)).getTime() / 1000;

						resultArr = ko.utils.arrayFilter(prdArray, function (r) {
								return ((r.unixTime >= startUnixTime) && (r.unixTime &lt;= endUnixTime));
							});
					}

					return resultArr;
				},
				deferEvaluation : true
			});

		// Real time border: min and max values in unix time format
		// This time border other than WPDDateStartYear, EndYear (ant other selectable values)
		vw.filteredByDateProductionDataSetTimeBorder = ko.computed({
				read : function () {
					var arr = ko.unwrap(vw.filteredByDateProductionDataSet);
					if (arr.length === 0) {
						return [];
					}

					return [arr[arr.length - 1].unixTime, arr[0].unixTime];
				},
				deferEvaluation : true
			});

		// Real value border: min and max values of data in selected squad
		vw.filteredByDateProductionDataSetValueBorder = ko.computed({
				read : function () {
					// Params viewmodels
					var tmpVwmList = ko.unwrap(vw.listOfSlcVwmWfmParameterOfWroup);
					// Data
					var tmpDataList = ko.unwrap(vw.filteredByDateProductionDataSet);

					// get max and min value to find coef for graph
					var minValue,
					maxValue;

					$.each(tmpDataList, function (prfIndex, prfElem) {
						$.each(tmpVwmList, function (clmIndex, clmElem) {
							if (ko.unwrap(clmElem.isVisible)) {
								var tmpMdl = clmElem.mdlWfmParameterOfWroup;
								if ($.isNumeric(ko.unwrap(prfElem[tmpMdl.wfmParameterId]))) {
									var tmpValue = ko.unwrap(prfElem[tmpMdl.wfmParameterId]) * ko.unwrap(tmpMdl.wfmParameter().uomCoef);
									// init first values
									if (typeof minValue === 'undefined' || typeof maxValue === 'undefined') {
										minValue = maxValue = tmpValue;
									} else {
										if (tmpValue > maxValue) {
											maxValue = tmpValue;
										} else if (tmpValue &lt; minValue) {
											minValue = tmpValue;
										}
									}
								}
							}
						});
					});

					// Plus (top and bottom) margin 5% - monotone function can be overdrawen out of graph wrap border
					if (typeof(minValue) !== 'undefined') {
						minValue -= minValue / 20;
						maxValue += maxValue / 20;
					}

					// Still can be undefined
					return [minValue, maxValue];
				},
				deferEvaluation : true
			});

		// =============================== Perfomance graph ================================
		vw.prfGraph = {
			// Width -> Height
			ratio : 1 / 3,
			// size, depended of svg viewbox: 1200/400 minus all margins
			viewBox : {
				width : 1110,
				height : 370,
				// divide by 80 or 20 (where scale)
				margin : {
					top : 10,
					right : 30,
					bottom : 20,
					left : 60
				},
			},
			axisSize : 10
		};
    
    /**
    * An attribute for a group of the graph
    *    The group with data lines
    * @type {string}
    */
    vw.graphTransform = 'translate(' + vw.prfGraph.viewBox.margin.left + ', ' + vw.prfGraph.viewBox.margin.top + ')';

    /**
    * An attribute for the X axis
    * @type {string}
    */
    vw.graphAxisXTransform = 'translate(0,' + vw.prfGraph.viewBox.height + ')';
    
		// actual width of graph and x-axis
		// real size of svg
		vw.prfGraph.width = ko.observable();

		// actual height of graph and y-axis
		vw.prfGraph.height = ko.computed({
				read : function () {
					var tmpWidth = ko.unwrap(vw.prfGraph.width);
					if (tmpWidth && $.isNumeric(tmpWidth)) {
						return tmpWidth * vw.prfGraph.ratio;
					}
				},
				deferEvaluation : true
			});

		vw.prfGraph.axis = {
			x : d3.svg.axis().tickSize(-vw.prfGraph.viewBox.height),
			y : d3.svg.axis().orient('left').tickSize(-vw.prfGraph.viewBox.width)
		};

		// Min and max zoom coeficient - 1 by default - without zoom
		////vw.prfGraph.scaleBorder = [0.0001, 10000];

		vw.prfGraph.zoom = d3.behavior.zoom().scaleExtent([0.0001, 10000]);

		function getSvgPath(paramList, timeBorder, valueBorder) {
			var resultJson = {};

			// Check parameter and data existence
			// dataSet.length > 0 &&
			if (paramList.length > 0 &&
				$.isNumeric(timeBorder[0]) &&
				$.isNumeric(timeBorder[1]) &&
				$.isNumeric(valueBorder[0]) &&
				$.isNumeric(valueBorder[1])) {

				var x = d3.time.scale()
					.range([0, vw.prfGraph.viewBox.width])
					.domain([new Date(timeBorder[0] * 1000), new Date(timeBorder[1] * 1000)]);

				var y = d3.scale.linear()
					.range([vw.prfGraph.viewBox.height, 0])
					.domain(valueBorder);

				vw.prfGraph.axis.x.scale(x);
				vw.prfGraph.axis.y.scale(y);

				vw.prfGraph.zoom.x(x).y(y);

				// tmp for axis ====================================
				////var altX = d3.time.scale()
				////        .domain([t1, t2])
				////        .range([t1, t2].map(d3.time.scale()
				////        .domain([t1, t2])
				////        .range([0, vw.prfGraph.viewBox.width])));
				// end tmp =================================

				$.each(paramList, function (paramIndex, paramElem) {
					var line = d3.svg.line()
						.interpolate('monotone') ////monotone //linear
						.x(function (d) {
							return x(new Date(d.unixTime * 1000));
						})
						.y(function (d) {
							return y(
								$.isNumeric(ko.unwrap(d[paramElem.wfmParameterId])) ? (ko.unwrap(d[paramElem.wfmParameterId]) * ko.unwrap(ko.unwrap(paramElem.wfmParameter).uomCoef)) : null);
						});

					resultJson[paramElem.wfmParameterId] = line;
					////resultJson[paramElem.wfmParameterId] = line(dataSet);
					////if (ko.unwrap(paramElem.isVisible) === true) {
					//}
				});
			}

			return resultJson;
		}

		// Update perfomance graph data: graph path for selected regions (d3 line objects in one json object)
		///&lt;return>{'WaterRate': d3Line, ...}&lt;/return>
		vw.productionDataSetSvgPath = ko.computed({
				read : function () {
					// Generate model list from viewmodel list
					var tmpList = ko.unwrap(vw.listOfSlcVwmWfmParameterOfWroup).map(function (elem) {
							return elem.mdlWfmParameterOfWroup;
						});

					return getSvgPath(
						tmpList,
						ko.unwrap(vw.filteredByDateProductionDataSetTimeBorder),
						ko.unwrap(vw.filteredByDateProductionDataSetValueBorder));
				},
				deferEvaluation : true
			});

		vw.joinedYearList = ko.computed({
				read : function () {
					if (ko.unwrap(vw.isVisibleForecastData)) {
						return ko.unwrap(mdlPerfomanceOfWell.forecastYearList).concat(ko.unwrap(mdlPerfomanceOfWell.histYearList));
					} else {
						return ko.unwrap(mdlPerfomanceOfWell.histYearList);
					}
				},
				deferEvaluation : true
			});

		/**
		 * Select file and import perfomance data
		 * @todo fix: get cell's fragments #HM! (using GetFragmentCell2D -> move to file spec controller)
		 */
		vw.importPerfomanceData = function () {
			// Open file manager
			vwmWell.unzOfSlcVwmSectionFmg(vwmWell.mdlStage.stageKey + '-perfomance');

			// Calback for selected file
			function mgrCallback() {
				vwmWell.fmgr.okError('');

				var tmpSlcVwmSection = ko.unwrap(vwmWell.slcVwmSectionFmg);

				if (!tmpSlcVwmSection) {
					throw new Error('No selected section');
				}

				// Select file from file manager
				var selectedFileSpecs = ko.unwrap(tmpSlcVwmSection.mdlSection.listOfFileSpec).filter(function (elem) {
						return ko.unwrap(elem.isSelected);
					});

				if (selectedFileSpecs.length !== 1) {
					vwmWell.fmgr.okError('need to select one file');
					return;
				}

				var tmpSlcFileSpec = selectedFileSpecs[0];

				//console.log('slcSection', tmpSlcVwmSection.mdlSection.id);
				mdlPerfomanceOfWell.getPerfomanceFragment(vwmWell.mdlStage.stageKey, tmpSlcVwmSection.mdlSection.id, tmpSlcFileSpec.id, 0, 10, function (response) {
					var columnAttrList = ko.unwrap(mdlPerfomanceOfWell.prdColumnAttributeList);
					console.log('clean columns: ', columnAttrList);
					// remove calculated attributes
					columnAttrList = columnAttrList.filter(function (arrElem) {
							return ko.unwrap(arrElem.IsCalc) === false;
						});

					var jsColumnAttrList = columnAttrList.map(function (elem) {
							return ko.toJS(elem);
						});
					// Hide window with files
					vwmWell.fmgr.hide();
					// Open window with match table
					buildMatchTable(response, tmpSlcFileSpec.extension, jsColumnAttrList, function (tmpSlcColumnAttrList, tmpIndexOfStartRow) {
						console.log(tmpSlcColumnAttrList, tmpIndexOfStartRow);
						mdlPerfomanceOfWell.postPerfomanceData(vwmWell.mdlStage.stageKey,
							tmpSlcVwmSection.mdlSection.id,
							tmpSlcFileSpec.id,
							tmpIndexOfStartRow,
							tmpSlcColumnAttrList,
							function () {
							// update data after import
							mdlPerfomanceOfWell.isLoadedHstProductionData(false);
							mdlPerfomanceOfWell.getHstProductionDataSet();
						}, function (jqXhr) {
							if (jqXhr.status === 422) {
								var resJson = jqXhr.responseJSON;
								require(['helpers/lang-helper'], function (langHelper) {
									var tmpProcessError = (langHelper.translate(resJson.errId) || resJson.errId);
									alert(tmpProcessError);
								});
							}
						});
					});
				});
			}

			// Add to observable
			vwmWell.fmgr.okCallback(mgrCallback);

			// Notification
			vwmWell.fmgr.okDescription('Please select a file to import');

			// Open file manager
			vwmWell.fmgr.show();
		};

		/**
		 * Remove all production data
		 */
		vw.removeWellProductionData = function () {
			if (confirm('{{capitalizeFirst lang.confirmToDelete}} all production data from well?')) {
				mdlPerfomanceOfWell.deleteWellProductionData();
			}
		};
	};

	return exports;
});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="all-bindings.html">bindings/all-bindings</a></li><li><a href="svg-bindings.html">bindings/svg-bindings</a></li><li><a href="stage-constants.html">constants/stage-constants</a></li><li><a href="svg-elem-type-constants.html">constants/svg-elem-type-constants</a></li><li><a href="ajax-request.html">helpers/ajax-request</a></li><li><a href="history-helper.html">helpers/history-helper</a></li><li><a href="log-helper.html">helpers/log-helper</a></li><li><a href="modal-helper.html">helpers/modal-helper</a></li><li><a href="area-of-map-of-wield.html">models/area-of-map-of-wield</a></li><li><a href="column-attribute.html">models/column-attribute</a></li><li><a href="company.html">models/company</a></li><li><a href="employee.html">models/employee</a></li><li><a href="file-spec.html">models/file-spec</a></li><li><a href="file-spec-of-history-of-well.html">models/file-spec-of-history-of-well</a></li><li><a href="forecast-evolution.html">models/forecast-evolution</a></li><li><a href="history-of-well.html">models/history-of-well</a></li><li><a href="integrity-of-well.html">models/integrity-of-well</a></li><li><a href="job-type.html">models/job-type</a></li><li><a href="log-of-well.html">models/log-of-well</a></li><li><a href="map-of-wield.html">models/map-of-wield</a></li><li><a href="monitoring-record.html">models/monitoring-record</a></li><li><a href="nodal-analysis-of-well.html">models/nodal-analysis-of-well</a></li><li><a href="perfomance-of-well.html">models/perfomance-of-well</a></li><li><a href="procent-border.html">models/procent-border</a></li><li><a href="production-data.html">models/production-data</a></li><li><a href="prop-spec.html">models/prop-spec</a></li><li><a href="section-of-stage.html">models/section-of-stage</a></li><li><a href="section-pattern.html">models/section-pattern</a></li><li><a href="sketch-of-well.html">models/sketch-of-well</a></li><li><a href="svg-elem.html">models/svg-elem</a></li><li><a href="test-data.html">models/test-data</a></li><li><a href="test-scope.html">models/test-scope</a></li><li><a href="user-profile.html">models/user-profile</a></li><li><a href="volume-of-well.html">models/volume-of-well</a></li><li><a href="wegion.html">models/wegion</a></li><li><a href="well.html">models/well</a></li><li><a href="well-marker-of-map-of-wield.html">models/well-marker-of-map-of-wield</a></li><li><a href="wfm-image.html">models/wfm-image</a></li><li><a href="wfm-param-squad.html">models/wfm-param-squad</a></li><li><a href="wfm-parameter.html">models/wfm-parameter</a></li><li><a href="wfm-parameter-of-wroup.html">models/wfm-parameter-of-wroup</a></li><li><a href="widget.html">models/widget</a></li><li><a href="widgock.html">models/widgock</a></li><li><a href="widgout.html">models/widgout</a></li><li><a href="wield.html">models/wield</a></li><li><a href="workspace.html">models/workspace</a></li><li><a href="wroup.html">models/wroup</a></li><li><a href="stage-base.html">models\bases/stage-base</a></li><li><a href="auth.html">services/auth</a></li><li><a href="company_.html">services/company</a></li><li><a href="company-user.html">services/company-user</a></li><li><a href="file-spec_.html">services/file-spec</a></li><li><a href="file-spec-of-history-of-well_.html">services/file-spec-of-history-of-well</a></li><li><a href="image-of-history-of-well.html">services/image-of-history-of-well</a></li><li><a href="integrity-of-well_.html">services/integrity-of-well</a></li><li><a href="log-of-well_.html">services/log-of-well</a></li><li><a href="map-of-wield_.html">services/map-of-wield</a></li><li><a href="monitoring-data.html">services/monitoring-data</a></li><li><a href="monitoring-record_.html">services/monitoring-record</a></li><li><a href="nodal-analysis-of-well_.html">services/nodal-analysis-of-well</a></li><li><a href="procent-border_.html">services/procent-border</a></li><li><a href="register.html">services/register</a></li><li><a href="section-pattern_.html">services/section-pattern</a></li><li><a href="sketch-of-well_.html">services/sketch-of-well</a></li><li><a href="svg-elem-of-log-of-well.html">services/svg-elem-of-log-of-well</a></li><li><a href="test-data_.html">services/test-data</a></li><li><a href="test-scope_.html">services/test-scope</a></li><li><a href="volume-of-well_.html">services/volume-of-well</a></li><li><a href="wegion_.html">services/wegion</a></li><li><a href="well_.html">services/well</a></li><li><a href="well-marker-of-map-of-wield_.html">services/well-marker-of-map-of-wield</a></li><li><a href="wfm-param-squad_.html">services/wfm-param-squad</a></li><li><a href="wfm-parameter-of-wroup_.html">services/wfm-parameter-of-wroup</a></li><li><a href="widget_.html">services/widget</a></li><li><a href="widgout_.html">services/widgout</a></li><li><a href="wield_.html">services/wield</a></li><li><a href="wroup_.html">services/wroup</a></li><li><a href="company__.html">viewmodels/company</a></li><li><a href="employee_.html">viewmodels/employee</a></li><li><a href="history-of-well_.html">viewmodels/history-of-well</a></li><li><a href="integrity-of-well__.html">viewmodels/integrity-of-well</a></li><li><a href="log-of-well__.html">viewmodels/log-of-well</a></li><li><a href="map-of-wield__.html">viewmodels/map-of-wield</a></li><li><a href="map-tool.html">viewmodels/map-tool</a></li><li><a href="nodal-analysis-of-well__.html">viewmodels/nodal-analysis-of-well</a></li><li><a href="perfomance-of-well_.html">viewmodels/perfomance-of-well</a></li><li><a href="scope-of-history-of-well.html">viewmodels/scope-of-history-of-well</a></li><li><a href="section-of-stage_.html">viewmodels/section-of-stage</a></li><li><a href="sketch-of-well__.html">viewmodels/sketch-of-well</a></li><li><a href="test-scope__.html">viewmodels/test-scope</a></li><li><a href="user-profile_.html">viewmodels/user-profile</a></li><li><a href="volume-of-well__.html">viewmodels/volume-of-well</a></li><li><a href="wegion__.html">viewmodels/wegion</a></li><li><a href="well__.html">viewmodels/well</a></li><li><a href="well-marker-of-map-of-wield__.html">viewmodels/well-marker-of-map-of-wield</a></li><li><a href="wfm-parameter-of-wroup__.html">viewmodels/wfm-parameter-of-wroup</a></li><li><a href="widget__.html">viewmodels/widget</a></li><li><a href="widgock_.html">viewmodels/widgock</a></li><li><a href="widgout__.html">viewmodels/widgout</a></li><li><a href="wield__.html">viewmodels/wield</a></li><li><a href="workspace_.html">viewmodels/workspace</a></li><li><a href="wroup__.html">viewmodels/wroup</a></li><li><a href="stage-base_.html">viewmodels\bases/stage-base</a></li><li><a href="stage-child-base.html">viewmodels\bases/stage-child-base</a></li><li><a href="widget-default-summary.html">viewmodels\widgets/widget-default-summary</a></li><li><a href="widget-well-history.html">viewmodels\widgets/widget-well-history</a></li><li><a href="widget-well-perfomance.html">viewmodels\widgets/widget-well-perfomance</a></li><li><a href="widget-well-sketch.html">viewmodels\widgets/widget-well-sketch</a></li><li><a href="widget-wield-map.html">viewmodels\widgets/widget-wield-map</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.2</a> on Thu Feb 20 2014 23:58:40 GMT+0200 (EET)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
