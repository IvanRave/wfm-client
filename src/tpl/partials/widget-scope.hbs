<div data-bind="if: isLoadedWidgouts">
  <div data-bind="if: widgouts().length === 0">
    {{ capitalizeFirst lang.dashboard }} is empty
  </div>
  <div class="clearfix">
    <div class="pull-left">
      <span data-bind="with: slcWidgout">
        <span data-bind="if: $root.isEmployeeInEditMode">
          <input class="input-sm" type="text" data-bind="value: name" />
        </span>
        <span data-bind="ifnot: $root.isEmployeeInEditMode">
          <span data-bind="text: name" />
        </span>
      </span>
    </div>
    <div class="pull-right" data-bind="if: $root.isEmployeeInEditMode">
      <span data-bind="visible: slcWidgout">
        <button class="btn btn-sm btn-default" data-bind="click: removeWidgout">{{capitalizeFirst lang.toDeleteLayout}}</button>
      </span>
    </div>
    <div class="pull-right" data-bind="visible: slcWidgout" style="margin-left: 32px">
      <select class="input-sm" data-bind="options: widgouts, optionsText: 'name', value: slcWidgout"></select>
    </div>
    <div class="pull-right" data-bind="if: $root.isEmployeeInEditMode">
      <select class="input-sm" data-bind="options: widgoutTemplates, optionsText: 'name', value: slcWidgoutTemplate, optionsCaption: 'Choose scheme...'"></select>
      <button class="btn btn-sm btn-default" data-bind="enable: slcWidgoutTemplate, click: postWidgout">{{capitalizeFirst lang.toCreateLayout}}</button>
    </div>
  </div>
  <div data-bind="with: slcWidgout">
    <div class="row" data-bind="foreach: widgockList">
      <div data-bind="css: columnStyle">
        <div data-bind="foreach: widgetList">
          <div class="widget-tile">
            <div class="clearfix widget-tile-header">
              <div class="pull-left">
                <div data-bind="ifnot: isVisSettingPanel">
                  <b data-bind="text: name"></b>
                </div>
                <div data-bind="if: isVisSettingPanel">
                  <input type="text" class="input-sm" data-bind="value: name" />
                </div>
              </div>
              <div class="pull-right" data-bind="if: $root.isEmployeeInEditMode">
                <div data-bind="ifnot: isVisSettingPanel">
                  <button class="btn btn-xs" type="button" data-bind="click: showVisSettingPanel">
                    <i class="glyphicon glyphicon-cog" title="{{capitalizeFirst lang.settings}}"></i>
                  </button>
                  <button class="btn btn-xs" type="button" data-bind="click: $parent.removeWidget">
                    <i class="glyphicon glyphicon-remove" title="{{capitalizeFirst lang.toDelete}}"></i>
                  </button>
                </div>
                <div data-bind="if: isVisSettingPanel">
                  <button class="btn btn-sm btn-success" type="button" data-bind="click: putWidget">
                    {{capitalizeFirst lang.toSave}}
                  </button>
                </div>
              </div>
            </div>
            <div class="widget-tile-content">
              <div data-bind="template: { name: widgetTpl, data: $data, as: 'widget' }"></div>
            </div>
          </div>
        </div>
        <div data-bind="if: $root.isEmployeeInEditMode">
          <div class="widget-tile">
            <div class="widget-empty">
              <div class="text-right">
                <!--sectionIdList-->
                <select class="input-sm" data-bind="options: $parents[1].stagePatternsForWidget, optionsText: 'name', value: slcStagePatternForWidget, optionsCaption: 'choose widget...'"></select>
                <button class="btn btn-default btn-sm" type="button" data-bind="click: addWidget, enable: slcStagePatternForWidget">
                  {{capitalizeFirst lang.toAdd}}
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>